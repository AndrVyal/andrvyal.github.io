{"version":3,"sources":["webpack:///dist/postmessenger.js","webpack:///webpack/bootstrap 288cca9ad77f343b7f8f","webpack:///./src/postmessenger.js","webpack:///./src/postmessenger/PostMessenger.js","webpack:///./node_modules/tinyutils/src/EventObject.js","webpack:///./src/postmessenger/Filter.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_PostMessenger","_PostMessenger2","obj","default","window","PostMessenger","_interopRequireDefault","_classCallCheck","instance","Constructor","TypeError","value","_typeof","Symbol","iterator","constructor","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_EventObject","_EventObject2","_Filter","_Filter2","ORIGIN_ALL","PRIVATE","WeakMap","_ref","arguments","undefined","filter","_ref$origin","origin","this","eventObject","freeze","filterMatcher","getMatcher","addEventListener","event","message","data","indexOf","trigger","lastEventId","ports","source","set","handler","off","on","_PRIVATE$get3","postMessage","EventObject","handlers","create","_PRIVATE$get","index","splice","_PRIVATE$get2","push","forEach","error","console","Filter","pattern","matcher","patternLength","keys","test","testLength","matches"],"mappings":"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","file":"dist/postmessenger.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _PostMessenger = __webpack_require__(1);\n\nvar _PostMessenger2 = _interopRequireDefault(_PostMessenger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.PostMessenger = _PostMessenger2.default;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _EventObject = __webpack_require__(2);\n\nvar _EventObject2 = _interopRequireDefault(_EventObject);\n\nvar _Filter = __webpack_require__(3);\n\nvar _Filter2 = _interopRequireDefault(_Filter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ORIGIN_ALL = '*';\nvar PRIVATE = new WeakMap();\n\nvar PostMessenger = function () {\n  function PostMessenger() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        filter = _ref.filter,\n        _ref$origin = _ref.origin,\n        origin = _ref$origin === undefined ? ORIGIN_ALL : _ref$origin;\n\n    _classCallCheck(this, PostMessenger);\n\n    var eventObject = new _EventObject2.default();\n\n    if (filter && (typeof filter === 'undefined' ? 'undefined' : _typeof(filter)) === 'object') {\n      filter = Object.freeze(filter);\n    }\n    var filterMatcher = _Filter2.default.getMatcher(filter);\n\n    window.addEventListener('message', function (event) {\n      var message = event.data;\n\n      if (message && filterMatcher(message.filter) && origin.length && (origin === ORIGIN_ALL || origin.indexOf(event.origin) >= 0)) {\n        eventObject.trigger(message.name, {\n          data: message.data,\n          lastEventId: event.lastEventId,\n          origin: event.origin,\n          ports: event.ports,\n          source: event.source\n        });\n      }\n    });\n\n    PRIVATE.set(this, {\n      eventObject: eventObject,\n      filter: filter,\n      origin: origin\n    });\n  }\n\n  _createClass(PostMessenger, [{\n    key: 'off',\n    value: function off(name, handler) {\n      var _PRIVATE$get = PRIVATE.get(this),\n          eventObject = _PRIVATE$get.eventObject;\n\n      eventObject.off(name, handler);\n    }\n  }, {\n    key: 'on',\n    value: function on(name, handler) {\n      var _PRIVATE$get2 = PRIVATE.get(this),\n          eventObject = _PRIVATE$get2.eventObject;\n\n      eventObject.on(name, handler);\n    }\n  }, {\n    key: 'post',\n    value: function post(target, name, data) {\n      var _PRIVATE$get3 = PRIVATE.get(this),\n          filter = _PRIVATE$get3.filter,\n          origin = _PRIVATE$get3.origin;\n\n      target.postMessage({\n        data: data,\n        filter: filter,\n        name: name\n      }, origin);\n    }\n  }]);\n\n  return PostMessenger;\n}();\n\nexports.default = PostMessenger;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PRIVATE = new WeakMap();\n\nvar EventObject = function () {\n  function EventObject() {\n    _classCallCheck(this, EventObject);\n\n    PRIVATE.set(this, {\n      handlers: Object.create(null)\n    });\n  }\n\n  _createClass(EventObject, [{\n    key: \"off\",\n    value: function off(event, handler) {\n      var _PRIVATE$get = PRIVATE.get(this),\n          handlers = _PRIVATE$get.handlers;\n\n      if (handlers[event]) {\n        var index = handlers[event].indexOf(handler);\n        if (index >= 0) {\n          handlers[event].splice(index, 1);\n\n          if (!handlers[event].length) {\n            delete handlers[event];\n          }\n        }\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, handler) {\n      var _PRIVATE$get2 = PRIVATE.get(this),\n          handlers = _PRIVATE$get2.handlers;\n\n      if (!handlers[event]) {\n        handlers[event] = [];\n      }\n\n      handlers[event].push(handler);\n    }\n  }, {\n    key: \"trigger\",\n    value: function trigger(event, data) {\n      var _PRIVATE$get3 = PRIVATE.get(this),\n          handlers = _PRIVATE$get3.handlers;\n\n      if (handlers[event]) {\n        handlers[event].forEach(function (handler) {\n          try {\n            handler(data);\n          } catch (error) {\n            console.error(error);\n          }\n        });\n      }\n    }\n  }]);\n\n  return EventObject;\n}();\n\nexports.default = EventObject;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Filter = function () {\n  function Filter() {\n    _classCallCheck(this, Filter);\n  }\n\n  _createClass(Filter, null, [{\n    key: 'getMatcher',\n    value: function getMatcher(pattern) {\n      var matcher = void 0;\n\n      if (pattern) {\n        if ((typeof pattern === 'undefined' ? 'undefined' : _typeof(pattern)) === 'object') {\n          var patternLength = Object.keys(pattern).length;\n\n          matcher = function matcher(test) {\n            if ((typeof test === 'undefined' ? 'undefined' : _typeof(test)) === 'object') {\n              var testLength = Object.keys(test).length;\n\n              if (patternLength === testLength) {\n                var matches = true;\n                for (var key in pattern) {\n                  if (pattern[key] !== test[key]) {\n                    matches = false;\n                    break;\n                  }\n                }\n\n                return matches;\n              } else {\n                return false;\n              }\n            } else {\n              return false;\n            }\n          };\n        } else {\n          matcher = function matcher(test) {\n            return pattern === test;\n          };\n        }\n      } else {\n        matcher = function matcher(test) {\n          return !test;\n        };\n      }\n\n      return matcher;\n    }\n  }]);\n\n  return Filter;\n}();\n\nexports.default = Filter;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/postmessenger.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 288cca9ad77f343b7f8f","import PostMessenger from './postmessenger/PostMessenger';\r\n\r\nwindow.PostMessenger = PostMessenger;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/postmessenger.js","import EventObject from 'tinyutils/src/EventObject';\r\nimport Filter from './Filter';\r\n\r\nconst ORIGIN_ALL = '*';\r\nconst PRIVATE = new WeakMap();\r\n\r\nexport default class PostMessenger {\r\n  constructor({filter, origin = ORIGIN_ALL} = {}) {\r\n    let eventObject = new EventObject();\r\n\r\n    if (filter && typeof filter === 'object') {\r\n      filter = Object.freeze(filter);\r\n    }\r\n    let filterMatcher = Filter.getMatcher(filter);\r\n\r\n    window.addEventListener('message', (event) => {\r\n      let message = event.data;\r\n\r\n      if (\r\n        message &&\r\n        filterMatcher(message.filter) &&\r\n        origin.length &&\r\n        (origin === ORIGIN_ALL || origin.indexOf(event.origin) >= 0)\r\n      ) {\r\n        eventObject.trigger(message.name, {\r\n          data: message.data,\r\n          lastEventId: event.lastEventId,\r\n          origin: event.origin,\r\n          ports: event.ports,\r\n          source: event.source\r\n        });\r\n      }\r\n    });\r\n\r\n    PRIVATE.set(this, {\r\n      eventObject,\r\n      filter,\r\n      origin\r\n    });\r\n  }\r\n\r\n  off(name, handler) {\r\n    let {eventObject} = PRIVATE.get(this);\r\n\r\n    eventObject.off(name, handler);\r\n  }\r\n\r\n  on(name, handler) {\r\n    let {eventObject} = PRIVATE.get(this);\r\n\r\n    eventObject.on(name, handler);\r\n  }\r\n\r\n  post(target, name, data) {\r\n    let {filter, origin} = PRIVATE.get(this);\r\n\r\n    target.postMessage({\r\n      data,\r\n      filter,\r\n      name\r\n    }, origin);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/postmessenger/PostMessenger.js","const PRIVATE = new WeakMap();\r\n\r\nexport default class EventObject {\r\n  constructor() {\r\n    PRIVATE.set(this, {\r\n      handlers: Object.create(null)\r\n    });\r\n  }\r\n\r\n  off(event, handler) {\r\n    let {handlers} = PRIVATE.get(this);\r\n\r\n    if (handlers[event]) {\r\n      let index = handlers[event].indexOf(handler);\r\n      if (index >= 0) {\r\n        handlers[event].splice(index, 1);\r\n\r\n        if (!handlers[event].length) {\r\n          delete handlers[event];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  on(event, handler) {\r\n    let {handlers} = PRIVATE.get(this);\r\n\r\n    if (!handlers[event]) {\r\n      handlers[event] = [];\r\n    }\r\n\r\n    handlers[event].push(handler);\r\n  }\r\n\r\n  trigger(event, data) {\r\n    let {handlers} = PRIVATE.get(this);\r\n\r\n    if (handlers[event]) {\r\n      handlers[event].forEach((handler) => {\r\n        try {\r\n          handler(data);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tinyutils/src/EventObject.js","export default class Filter {\r\n  static getMatcher(pattern) {\r\n    let matcher;\r\n\r\n    if (pattern) {\r\n      if (typeof pattern === 'object') {\r\n        let patternLength = Object.keys(pattern).length;\r\n\r\n        matcher = (test) => {\r\n          if (typeof test === 'object') {\r\n            let testLength = Object.keys(test).length;\r\n\r\n            if (patternLength === testLength) {\r\n              let matches = true;\r\n              for (let key in pattern) {\r\n                if (pattern[key] !== test[key]) {\r\n                  matches = false;\r\n                  break;\r\n                }\r\n              }\r\n\r\n              return matches;\r\n            } else {\r\n              return false;\r\n            }\r\n          } else {\r\n            return false;\r\n          }\r\n        };\r\n      } else {\r\n        matcher = test => pattern === test;\r\n      }\r\n    } else {\r\n      matcher = test => !test;\r\n    }\r\n\r\n    return matcher;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/postmessenger/Filter.js"],"sourceRoot":""}