!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r);window.RunningCookie=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),a=r(i),c=n(3),f=r(c),l=n(4),s=r(l),d=500,p=!/Android|iPhone|iPad|iPod|IEMobile|webOS|BlackBerry|Opera Mini/i.test(navigator.userAgent),v=2e3,h=v/10,g=Object.freeze({ALREADY_INTERRUPTED:"This session has already been interrupted",ALREADY_STOPPED:"This session has already been stopped",COOKIE_NOT_AVAILABLE:"This cookie is not available"}),y=new WeakMap,b=function(){function e(t){if(o(this,e),a.default.get(t))throw new Error(g.COOKIE_NOT_AVAILABLE);var n=void 0,r=new f.default,u=s.default.generateId(),i={interrupted:!1,stopped:!1},c=void 0,l=function(){if(!i.stopped){a.default.get(t)!==u&&(i.interrupted=!0,E(),setTimeout(function(){r.trigger("interrupt")}))}},b=function(){a.default.set(t,a.default.FALSE,{expires:a.default.EXPIRED})},E=function(){n&&(clearInterval(n),n=null),c&&(clearInterval(c),c=null),i.stopped=!0},k=function(){a.default.set(t,u,p?{expires:new Date(Date.now()+v)}:{})},w=function(){E(),b()};y.set(this,{checkStatus:l,eventObject:r,name:t,sessionId:u,status:i,stop:w}),k(),n=setInterval(l,d),p&&(c=setInterval(function(){l(),i.stopped||k()},h)),window.addEventListener("unload",function(){l(),i.stopped||w()})}return u(e,null,[{key:"isFree",value:function(e){return!a.default.get(e)}},{key:"ERRORS",get:function(){return g}}]),u(e,[{key:"off",value:function(e,t){y.get(this).eventObject.off(e,t)}},{key:"on",value:function(e,t){y.get(this).eventObject.on(e,t)}},{key:"stop",value:function(){var e=y.get(this),t=e.checkStatus,n=e.status,r=e.stop;if(t(),n.stopped)throw new Error(n.interrupted?g.ALREADY_INTERRUPTED:g.ALREADY_STOPPED);r()}},{key:"interrupted",get:function(){var e=y.get(this),t=e.checkStatus,n=e.status;return t(),n.interrupted}},{key:"stopped",get:function(){var e=y.get(this),t=e.checkStatus,n=e.status;return t(),n.stopped}}]),e}();t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"get",value:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.domain,o=n.expires,u=n.path,i=void 0===u?"/":u,a=e+"="+encodeURIComponent(t);a+=";path="+i,r&&(a+=";domain="+r),o&&(a+=";expires="+o.toUTCString()),document.cookie=a}},{key:"EXPIRED",get:function(){return new Date(Date.now()-1)}},{key:"FALSE",get:function(){return""}},{key:"TRUE",get:function(){return"1"}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=new WeakMap,i=function(){function e(){r(this,e),u.set(this,{handlers:Object.create(null)})}return o(e,[{key:"off",value:function(e,t){var n=u.get(this),r=n.handlers;if(r[e]){var o=r[e].indexOf(t);o>=0&&(r[e].splice(o,1),r[e].length||delete r[e])}}},{key:"on",value:function(e,t){var n=u.get(this),r=n.handlers;r[e]||(r[e]=[]),r[e].push(t)}},{key:"trigger",value:function(e,t){var n=u.get(this),r=n.handlers;r[e]&&r[e].forEach(function(e){try{e(t)}catch(e){console.error(e)}})}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"generateId",value:function(){var e=String(Math.random())+"00000000000",t="00000000000"+String(Date.now());return e.slice(2,12)+t.slice(t.length-10,t.length)}}]),e}();t.default=u}]);
//# sourceMappingURL=runningcookie.js.map