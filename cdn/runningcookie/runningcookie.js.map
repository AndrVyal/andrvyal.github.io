{"version":3,"sources":["webpack:///runningcookie.js","webpack:///webpack/bootstrap 1a2d08bcbebbdb962da5","webpack:///./runningcookie.js","webpack:///./runningcookie/RunningCookie.js","webpack:///./runningcookie/Cookies.js","webpack:///../../tinyutils/src/EventObject.js","webpack:///./runningcookie/Session.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_RunningCookie","_RunningCookie2","obj","default","window","RunningCookie","_interopRequireDefault","_classCallCheck","instance","Constructor","TypeError","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_Cookies","_Cookies2","_EventObject","_EventObject2","_Session","_Session2","CHECK_DELAY_DEFAULT","DESKTOP","test","navigator","userAgent","DESKTOP_LIFETIME","DESKTOP_UPDATE_DELAY","ERRORS","freeze","ALREADY_INTERRUPTED","ALREADY_STOPPED","COOKIE_NOT_AVAILABLE","PRIVATE","WeakMap","this","Error","checkInterval","eventObject","sessionId","generateId","status","interrupted","stopped","updateInterval","checkStatus","clearIntervals","setTimeout","trigger","clearCookie","set","FALSE","expires","EXPIRED","clearInterval","setCookie","Date","now","stop","setInterval","addEventListener","handler","off","on","_PRIVATE$get3","_PRIVATE$get4","_PRIVATE$get5","Cookies","matches","document","cookie","match","RegExp","encodeURIComponent","decodeURIComponent","undefined","_ref","arguments","domain","_ref$path","path","toUTCString","EventObject","handlers","create","event","_PRIVATE$get","index","indexOf","splice","_PRIVATE$get2","push","data","forEach","error","console","Session","rand","String","Math","random","time","slice"],"mappings":"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","file":"runningcookie.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _RunningCookie = __webpack_require__(1);\n\nvar _RunningCookie2 = _interopRequireDefault(_RunningCookie);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nwindow.RunningCookie = _RunningCookie2.default;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Cookies = __webpack_require__(2);\n\nvar _Cookies2 = _interopRequireDefault(_Cookies);\n\nvar _EventObject = __webpack_require__(3);\n\nvar _EventObject2 = _interopRequireDefault(_EventObject);\n\nvar _Session = __webpack_require__(4);\n\nvar _Session2 = _interopRequireDefault(_Session);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CHECK_DELAY_DEFAULT = 500;\nvar DESKTOP = !/Android|iPhone|iPad|iPod|IEMobile|webOS|BlackBerry|Opera Mini/i.test(navigator.userAgent);\nvar DESKTOP_LIFETIME = 2000;\nvar DESKTOP_UPDATE_DELAY = DESKTOP_LIFETIME / 10;\nvar ERRORS = Object.freeze({\n  ALREADY_INTERRUPTED: 'This session has already been interrupted',\n  ALREADY_STOPPED: 'This session has already been stopped',\n  COOKIE_NOT_AVAILABLE: 'This cookie is not available'\n});\nvar PRIVATE = new WeakMap();\n\nvar RunningCookie = function () {\n  _createClass(RunningCookie, null, [{\n    key: 'isFree',\n    value: function isFree(name) {\n      return !_Cookies2.default.get(name);\n    }\n  }, {\n    key: 'ERRORS',\n    get: function get() {\n      return ERRORS;\n    }\n  }]);\n\n  function RunningCookie(name) {\n    _classCallCheck(this, RunningCookie);\n\n    var cookie = _Cookies2.default.get(name);\n    if (cookie) {\n      throw new Error(ERRORS.COOKIE_NOT_AVAILABLE);\n    }\n\n    var checkInterval = void 0;\n    var eventObject = new _EventObject2.default();\n    var sessionId = _Session2.default.generateId();\n    var status = {\n      interrupted: false,\n      stopped: false\n    };\n    var updateInterval = void 0;\n\n    var checkStatus = function checkStatus() {\n      if (status.stopped) {\n        return;\n      }\n\n      var cookie = _Cookies2.default.get(name);\n      if (cookie !== sessionId) {\n        status.interrupted = true;\n        clearIntervals();\n\n        setTimeout(function () {\n          eventObject.trigger('interrupt');\n        });\n      }\n    };\n\n    var clearCookie = function clearCookie() {\n      _Cookies2.default.set(name, _Cookies2.default.FALSE, {\n        expires: _Cookies2.default.EXPIRED\n      });\n    };\n\n    var clearIntervals = function clearIntervals() {\n      if (checkInterval) {\n        clearInterval(checkInterval);\n        checkInterval = null;\n      }\n\n      if (updateInterval) {\n        clearInterval(updateInterval);\n        updateInterval = null;\n      }\n\n      status.stopped = true;\n    };\n\n    var setCookie = function setCookie() {\n      _Cookies2.default.set(name, sessionId, DESKTOP ? {\n        expires: new Date(Date.now() + DESKTOP_LIFETIME)\n      } : {});\n    };\n\n    var stop = function stop() {\n      clearIntervals();\n      clearCookie();\n    };\n\n    PRIVATE.set(this, {\n      checkStatus: checkStatus,\n      eventObject: eventObject,\n      name: name,\n      sessionId: sessionId,\n      status: status,\n      stop: stop\n    });\n\n    setCookie();\n    checkInterval = setInterval(checkStatus, CHECK_DELAY_DEFAULT);\n\n    if (DESKTOP) {\n      updateInterval = setInterval(function () {\n        checkStatus();\n\n        if (!status.stopped) {\n          setCookie();\n        }\n      }, DESKTOP_UPDATE_DELAY);\n    }\n\n    window.addEventListener('unload', function () {\n      checkStatus();\n\n      if (!status.stopped) {\n        stop();\n      }\n    });\n  }\n\n  _createClass(RunningCookie, [{\n    key: 'off',\n    value: function off(name, handler) {\n      var _PRIVATE$get = PRIVATE.get(this),\n          eventObject = _PRIVATE$get.eventObject;\n\n      eventObject.off(name, handler);\n    }\n  }, {\n    key: 'on',\n    value: function on(name, handler) {\n      var _PRIVATE$get2 = PRIVATE.get(this),\n          eventObject = _PRIVATE$get2.eventObject;\n\n      eventObject.on(name, handler);\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      var _PRIVATE$get3 = PRIVATE.get(this),\n          checkStatus = _PRIVATE$get3.checkStatus,\n          status = _PRIVATE$get3.status,\n          stop = _PRIVATE$get3.stop;\n\n      checkStatus();\n\n      if (status.stopped) {\n        throw new Error(status.interrupted ? ERRORS.ALREADY_INTERRUPTED : ERRORS.ALREADY_STOPPED);\n      } else {\n        stop();\n      }\n    }\n  }, {\n    key: 'interrupted',\n    get: function get() {\n      var _PRIVATE$get4 = PRIVATE.get(this),\n          checkStatus = _PRIVATE$get4.checkStatus,\n          status = _PRIVATE$get4.status;\n\n      checkStatus();\n\n      return status.interrupted;\n    }\n  }, {\n    key: 'stopped',\n    get: function get() {\n      var _PRIVATE$get5 = PRIVATE.get(this),\n          checkStatus = _PRIVATE$get5.checkStatus,\n          status = _PRIVATE$get5.status;\n\n      checkStatus();\n\n      return status.stopped;\n    }\n  }]);\n\n  return RunningCookie;\n}();\n\nexports.default = RunningCookie;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_PATH = '/';\n\nvar Cookies = function () {\n  function Cookies() {\n    _classCallCheck(this, Cookies);\n  }\n\n  _createClass(Cookies, null, [{\n    key: 'get',\n    value: function get(name) {\n      var matches = document.cookie.match(new RegExp('(?:^|; )' + encodeURIComponent(name) + '=([^;]*)'));\n\n      return matches ? decodeURIComponent(matches[1]) : undefined;\n    }\n  }, {\n    key: 'set',\n    value: function set(name, value) {\n      var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n          domain = _ref.domain,\n          expires = _ref.expires,\n          _ref$path = _ref.path,\n          path = _ref$path === undefined ? DEFAULT_PATH : _ref$path;\n\n      var cookie = name + '=' + encodeURIComponent(value);\n\n      cookie += ';path=' + path;\n      if (domain) {\n        cookie += ';domain=' + domain;\n      }\n      if (expires) {\n        cookie += ';expires=' + expires.toUTCString();\n      }\n\n      document.cookie = cookie;\n    }\n  }, {\n    key: 'EXPIRED',\n    get: function get() {\n      return new Date(Date.now() - 1);\n    }\n  }, {\n    key: 'FALSE',\n    get: function get() {\n      return '';\n    }\n  }, {\n    key: 'TRUE',\n    get: function get() {\n      return '1';\n    }\n  }]);\n\n  return Cookies;\n}();\n\nexports.default = Cookies;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PRIVATE = new WeakMap();\n\nvar EventObject = function () {\n  function EventObject() {\n    _classCallCheck(this, EventObject);\n\n    PRIVATE.set(this, {\n      handlers: Object.create(null)\n    });\n  }\n\n  _createClass(EventObject, [{\n    key: \"off\",\n    value: function off(event, handler) {\n      var _PRIVATE$get = PRIVATE.get(this),\n          handlers = _PRIVATE$get.handlers;\n\n      if (handlers[event]) {\n        var index = handlers[event].indexOf(handler);\n        if (index >= 0) {\n          handlers[event].splice(index, 1);\n\n          if (!handlers[event].length) {\n            delete handlers[event];\n          }\n        }\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, handler) {\n      var _PRIVATE$get2 = PRIVATE.get(this),\n          handlers = _PRIVATE$get2.handlers;\n\n      if (!handlers[event]) {\n        handlers[event] = [];\n      }\n\n      handlers[event].push(handler);\n    }\n  }, {\n    key: \"trigger\",\n    value: function trigger(event, data) {\n      var _PRIVATE$get3 = PRIVATE.get(this),\n          handlers = _PRIVATE$get3.handlers;\n\n      if (handlers[event]) {\n        handlers[event].forEach(function (handler) {\n          try {\n            handler(data);\n          } catch (error) {\n            console.error(error);\n          }\n        });\n      }\n    }\n  }]);\n\n  return EventObject;\n}();\n\nexports.default = EventObject;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ADDON = '00000000000';\n\nvar Session = function () {\n  function Session() {\n    _classCallCheck(this, Session);\n  }\n\n  _createClass(Session, null, [{\n    key: 'generateId',\n    value: function generateId() {\n      var rand = String(Math.random()) + ADDON;\n      var time = ADDON + String(Date.now());\n\n      return rand.slice(2, 12) + time.slice(time.length - 10, time.length);\n    }\n  }]);\n\n  return Session;\n}();\n\nexports.default = Session;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// runningcookie.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1a2d08bcbebbdb962da5","import RunningCookie from './runningcookie/RunningCookie';\r\n\r\nwindow.RunningCookie = RunningCookie;\r\n\n\n\n// WEBPACK FOOTER //\n// ./runningcookie.js","import Cookies from './Cookies';\r\nimport EventObject from 'tinyutils/src/EventObject';\r\nimport Session from './Session';\r\n\r\nconst CHECK_DELAY_DEFAULT = 500;\r\nconst DESKTOP = !/Android|iPhone|iPad|iPod|IEMobile|webOS|BlackBerry|Opera Mini/i.test(navigator.userAgent);\r\nconst DESKTOP_LIFETIME = 2000;\r\nconst DESKTOP_UPDATE_DELAY = DESKTOP_LIFETIME / 10;\r\nconst ERRORS = Object.freeze({\r\n  ALREADY_INTERRUPTED: 'This session has already been interrupted',\r\n  ALREADY_STOPPED: 'This session has already been stopped',\r\n  COOKIE_NOT_AVAILABLE: 'This cookie is not available'\r\n});\r\nconst PRIVATE = new WeakMap();\r\n\r\nexport default class RunningCookie {\r\n  static get ERRORS() {\r\n    return ERRORS;\r\n  }\r\n\r\n  static isFree(name) {\r\n    return !Cookies.get(name);\r\n  }\r\n\r\n  constructor(name) {\r\n    let cookie = Cookies.get(name);\r\n    if (cookie) {\r\n      throw new Error(ERRORS.COOKIE_NOT_AVAILABLE);\r\n    }\r\n\r\n    let checkInterval;\r\n    let eventObject = new EventObject();\r\n    let sessionId = Session.generateId();\r\n    let status = {\r\n      interrupted: false,\r\n      stopped: false\r\n    };\r\n    let updateInterval;\r\n\r\n    let checkStatus = () => {\r\n      if (status.stopped) {\r\n        return;\r\n      }\r\n\r\n      let cookie = Cookies.get(name);\r\n      if (cookie !== sessionId) {\r\n        status.interrupted = true;\r\n        clearIntervals();\r\n\r\n        setTimeout(() => {\r\n          eventObject.trigger('interrupt');\r\n        });\r\n      }\r\n    };\r\n\r\n    let clearCookie = () => {\r\n      Cookies.set(name, Cookies.FALSE, {\r\n        expires: Cookies.EXPIRED\r\n      });\r\n    };\r\n\r\n    let clearIntervals = () => {\r\n      if (checkInterval) {\r\n        clearInterval(checkInterval);\r\n        checkInterval = null;\r\n      }\r\n\r\n      if (updateInterval) {\r\n        clearInterval(updateInterval);\r\n        updateInterval = null;\r\n      }\r\n\r\n      status.stopped = true;\r\n    };\r\n\r\n    let setCookie = () => {\r\n      Cookies.set(name, sessionId, DESKTOP ? {\r\n        expires: new Date(Date.now() + DESKTOP_LIFETIME)\r\n      } : {});\r\n    };\r\n\r\n    let stop = () => {\r\n      clearIntervals();\r\n      clearCookie();\r\n    };\r\n\r\n    PRIVATE.set(this, {\r\n      checkStatus,\r\n      eventObject,\r\n      name,\r\n      sessionId,\r\n      status,\r\n      stop\r\n    });\r\n\r\n    setCookie();\r\n    checkInterval = setInterval(checkStatus, CHECK_DELAY_DEFAULT);\r\n\r\n    if (DESKTOP) {\r\n      updateInterval = setInterval(() => {\r\n        checkStatus();\r\n\r\n        if (!status.stopped) {\r\n          setCookie();\r\n        }\r\n      }, DESKTOP_UPDATE_DELAY);\r\n    }\r\n\r\n    window.addEventListener('unload', () => {\r\n      checkStatus();\r\n\r\n      if (!status.stopped) {\r\n        stop();\r\n      }\r\n    });\r\n  }\r\n\r\n  get interrupted() {\r\n    let {checkStatus, status} = PRIVATE.get(this);\r\n\r\n    checkStatus();\r\n\r\n    return status.interrupted;\r\n  }\r\n\r\n  off(name, handler) {\r\n    let {eventObject} = PRIVATE.get(this);\r\n\r\n    eventObject.off(name, handler);\r\n  }\r\n\r\n  on(name, handler) {\r\n    let {eventObject} = PRIVATE.get(this);\r\n\r\n    eventObject.on(name, handler);\r\n  }\r\n\r\n  stop() {\r\n    let {checkStatus, status, stop} = PRIVATE.get(this);\r\n\r\n    checkStatus();\r\n\r\n    if (status.stopped) {\r\n      throw new Error(status.interrupted ? ERRORS.ALREADY_INTERRUPTED : ERRORS.ALREADY_STOPPED);\r\n    } else {\r\n      stop();\r\n    }\r\n  }\r\n\r\n  get stopped() {\r\n    let {checkStatus, status} = PRIVATE.get(this);\r\n\r\n    checkStatus();\r\n\r\n    return status.stopped;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./runningcookie/RunningCookie.js","const DEFAULT_PATH = '/';\r\n\r\nexport default class Cookies {\r\n  static get EXPIRED() {\r\n    return new Date(Date.now() - 1);\r\n  }\r\n\r\n  static get FALSE() {\r\n    return '';\r\n  }\r\n\r\n  static get TRUE() {\r\n    return '1';\r\n  }\r\n\r\n  static get(name) {\r\n    let matches = document.cookie.match(new RegExp('(?:^|; )' + encodeURIComponent(name) + '=([^;]*)'));\r\n\r\n    return matches ? decodeURIComponent(matches[1]) : undefined;\r\n  }\r\n\r\n  static set(name, value, {domain, expires, path = DEFAULT_PATH} = {}) {\r\n    let cookie = name + '=' + encodeURIComponent(value);\r\n\r\n    cookie += ';path=' + path;\r\n    if (domain) {\r\n      cookie += ';domain=' + domain;\r\n    }\r\n    if (expires) {\r\n      cookie += ';expires=' + expires.toUTCString();\r\n    }\r\n\r\n    document.cookie = cookie;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./runningcookie/Cookies.js","const PRIVATE = new WeakMap();\r\n\r\nexport default class EventObject {\r\n  constructor() {\r\n    PRIVATE.set(this, {\r\n      handlers: Object.create(null)\r\n    });\r\n  }\r\n\r\n  off(event, handler) {\r\n    let {handlers} = PRIVATE.get(this);\r\n\r\n    if (handlers[event]) {\r\n      let index = handlers[event].indexOf(handler);\r\n      if (index >= 0) {\r\n        handlers[event].splice(index, 1);\r\n\r\n        if (!handlers[event].length) {\r\n          delete handlers[event];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  on(event, handler) {\r\n    let {handlers} = PRIVATE.get(this);\r\n\r\n    if (!handlers[event]) {\r\n      handlers[event] = [];\r\n    }\r\n\r\n    handlers[event].push(handler);\r\n  }\r\n\r\n  trigger(event, data) {\r\n    let {handlers} = PRIVATE.get(this);\r\n\r\n    if (handlers[event]) {\r\n      handlers[event].forEach((handler) => {\r\n        try {\r\n          handler(data);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../../tinyutils/src/EventObject.js","const ADDON = '00000000000';\r\n\r\nexport default class Session {\r\n  static generateId() {\r\n    let rand = String(Math.random()) + ADDON;\r\n    let time = ADDON + String(Date.now());\r\n\r\n    return rand.slice(2, 12) + time.slice(time.length - 10, time.length);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./runningcookie/Session.js"],"sourceRoot":""}